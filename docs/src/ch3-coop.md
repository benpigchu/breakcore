# 第三章第一部分：非抢占式调度的分时多任务系统

## 为不同的应用程序指定不同的内存空间

由于我们需要同时执行不同的应用程序，所以我们需要把他们放在不同的地址空间，于是便需要为他们指定不同的基地址。为此我们需要大幅修改用户程序的编译过程。首先，我们需要在用户程序包当中加入 `build.rs` 在编译时生成链接器脚本。其次我们需要改写编译脚本，使之分别编译各个用户程序，并分别设置基地址。为了验证这些修改，我们把内核中用户程序加载的地址也进行调整，由应用程序的编号决定具体的内存地址。

同样的，栈空间也需要分离开来。这一点我们只需要预留好应用数量那么多的栈空间，并稍作修改相关的部分就好。

## 分离应用加载和应用运行的逻辑

